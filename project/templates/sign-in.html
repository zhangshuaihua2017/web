
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>WorkWise Html Template</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="" />
<meta name="keywords" content="" />
<link rel="stylesheet" type="text/css" href="/user/static/css/animate.css">
<link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/user/static/css/line-awesome.css">
<link rel="stylesheet" type="text/css" href="/user/static/css/line-awesome-font-awesome.min.css">
<link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
<link rel="stylesheet" type="text/css" href="/user/static/lib/slick/slick.css">
<link rel="stylesheet" type="text/css" href="/user/static/lib/slick/slick-theme.css">
<link rel="stylesheet" type="text/css" href="/user/static/css/responsive.css">
<link rel="stylesheet" type="text/css" href="/user/static/css/responsive.css">
<link rel="stylesheet" type="text/css" href="/user/static/css/style_sign_in.css">

</head>

 
<body class="sign-in">
	

	<div class="wrapper">  
		

		<div class="sign-in-page">
			<div class="signin-popup">
				<div class="signin-pop shadow-lg p-3 mb-5 bg-white rounded">
					<div class="row">
						<div class="col-lg-12">
							<div class="cmp-info">
								<div class="cm-logo" style="text-align: center;font-weight: bold;font-size: 23px;"> 
									<!-- <img class="img-thumbnail img-responsive" src="/user/static/images/cm-logo.png" alt=""> -->
									<span style="border-bottom: 3px solid #bcbcbc;color: #FF6700">欢迎使用知否笔记</span>
								</div><!--cm-logo end-->	
								<!-- <img src="/user/static/images/cm-main-img.png" alt="">			 -->
							</div><!--cmp-info end-->
						</div>

						
						<div class="col-lg-12">
							<div class="login-sec">
								<ul class="sign-control">
									<li data-tab="tab-1" class="current"><a href="#" title="">登&nbsp&nbsp陆</a></li>
									<li data-tab="tab-2"><a href="#" title="">注&nbsp&nbsp册</a></li>				
								</ul>			
								<div class="sign_in_sec current" id="tab-1">
									
									
									<form>
										<div class="row">
											<div class="col-lg-12 no-pdd">
												<div class="sn-field">
													<input id="username" type="email" class="form-control" name="username" placeholder="请输入邮箱" value="1764056039@qq.com">
													<i class="la la-user"></i>
												</div><!--sn-field end-->
											</div>
											<div class="col-lg-12 no-pdd">
												<div class="sn-field">
													<input id="password" type="password" class="form-control" name="password" placeholder="请输入密码" value="12345678">
													<i class="la la-lock"></i>
												</div>
											</div>
											<div class="col-lg-12 no-pdd">
												<div class="container" style="padding: 0">
													<div class="row">
														<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style="padding: 0">
															<input id="imageCode" type="text" class="form-control" name="password" placeholder="请输入验证码"></div>
														<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style="padding: 0">
															<img onclick="this.src=this.src+'?'+Math.random()" src="/getImageCode" style="width: 134px;height: 40px" class="pull-right">
														</div>
													</div>
												</div>
                                        	</div>
											<div class="col-lg-12 no-pdd">
												<div class="checky-sec">
													<div class="fgt-sec">
														<input type="checkbox" name="cc" id="c1">
														<label for="c1">
															<span></span>
														</label>
														<small style="color: #bcbcbc">记住密码</small>
													</div><!--fgt-sec end-->
													<a href="javascript:forgetPassword()" title="" style="color: #bcbcbc">忘记密码？</a>
												</div>
											</div>
											<div class="col-lg-12 no-pdd" style="text-align: center;">
												<button id="btnLogin" type="button" style="background-color: #FF6700">登陆</button>
											</div>
											<div>
				                                <img class="img-fluid mx-auto d-block" style="float: none;padding-top: 15px" src="/user/static/images/cm-main-img.png" alt="">
				                            </div><!--login-resources end-->
										</div>
									</form>
									
									<!-- <div class="login-resources">
										<ul>
											<li><a href="#" title="" class="fb"><i class="fa fa-qq"></i>QQ登陆</a></li>
											<li><a href="#" title="" class="tw"><i class="fa fa-weixin"></i>微信登录</a></li>
										</ul>
									</div> -->
								</div><!--sign_in_sec end-->

								<div class="sign_in_sec" id="tab-2">
									<form>
										<div class="row">
											<div class="col-lg-12 no-pdd">
												<div class="sn-field">
													<input id="mail_register" type="email" class="form-control" name="username" placeholder="请输入邮箱">
													<i class="la la-user"></i>
												</div><!--sn-field end-->
											</div>
											<div class="col-lg-12 no-pdd">
												<div class="sn-field">
													<input id="password_register" type="password" class="form-control" name="password" placeholder="请输入密码">
													<i class="la la-lock"></i>
												</div>
											</div>
											<div class="col-lg-12 no-pdd">
												<div class="sn-field">
													<input id="testPassword" type="password" class="form-control" name="password" placeholder="请再次输入密码">
													<i class="la la-lock"></i>
												</div>
											</div>
											<div class="col-lg-12 no-pdd">
												<div class="container" style="padding: 0">
													<div class="row">
														<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style="padding: 0">
															<input id="mailCode" type="text" class="form-control" name="password" placeholder="请输入验证码"></div>
														<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style="padding: 0">
															<button id="btnRandomCode" type="button" class="pull-right" style="margin: 0;background-color: #FF6700">获取验证码</button>
														</div>
													</div>
												</div>
                                        	</div>
											<div class="col-lg-12 no-pdd">
												<div class="checky-sec st2">
													<!-- <div class="fgt-sec">
														<input type="checkbox" name="cc" id="c2">
														<label for="c2">
															<span></span>
														</label>
														<small>Yes, I understand and agree to the workwise Terms & Conditions.</small>
													</div> -->
												</div>
											</div>
											<div class="col-lg-12 no-pdd" style="text-align: center;">
												<button id="btnRegister" type="button" style="background-color: #FF6700">注册</button>
											</div>
										</div>
									</form>
								</div><!--sign_in_sec end-->	
							</div><!--login-sec end-->
						</div>
					</div>
				</div><!--signin-pop end-->
			</div><!--signin-popup end-->
			<div class="footy-sec" style="margin-bottom: 10px;">
			    <div class="container text-center">
			        <p style="float: none;color: #bcbcbc"><img style="float: none" src="/user/static/images/copy-icon.png" alt="">Copyright 2020 本归尘博客系统由游马版权所有</p>
			    </div>
			</div><!--footy-sec end-->
		</div><!--sign-in-page end-->


	</div><!--theme-layout end-->


<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript" src="/user/static/js/popper.js"></script>
<script type="text/javascript" src="/user/static/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/user/static/lib/slick/slick.min.js"></script>
<script type="text/javascript" src="/user/static/js/script.js"></script>

<script src="https://cdn.staticfile.org/vue/2.4.2/vue.min.js"></script>
<script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"></script>
<script src="https://cdn.staticfile.org/vue-resource/1.5.1/vue-resource.min.js"></script>
<script type="text/javascript">
	var public_path = "/user/templates/";
</script>
<script type = "text/javascript">
	//登陆
	$('#btnLogin').click(function(){
        $.ajax({
            type: "POST",
            url: "/login",
            data: {username:$("#username").val(), password:$("#password").val(), imageCode:$("#imageCode").val()},
            dataType: "json",
            success: function(data){
	            // $('#resText').empty();   //清空resText里面的所有内容
	            if(data.status == "SUCCESS"){
	            	alert("登陆成功");
	            	window.location.href = public_path + "index.html";
	            }else{
	            	console.log(data);
	            	alert(data.message);
	            }
	        },
	        complete: function( xhr,data ){
	        	var header1 = xhr.getResponseHeader("Access-control-expose-headers");
	        	var header2 = xhr.getResponseHeader("Authorization");

	        	var sessionStorage = window.sessionStorage;
		        sessionStorage.setItem("header1", header1);
		        sessionStorage.setItem("header2", header2);
	        }
	    });
	});

	//发送验证码
	var time = 60;
	$('#btnRandomCode').click(function(){
		$("#btnRandomCode").attr('disabled',true);

		$.ajax({
            type: "GET",
            url: "/getMailCode/注册",
            data: {mail:$("#mail_register").val()},
            dataType: "json",
            success: function(data){
            	console.log("发送邮箱验证码成功");
	        }
        });

		countDown();
    });
	function countDown() {
	   if (time == 0) { 
	       time = 60;
	       $('#btnRandomCode').removeAttr("disabled");
		   $('#btnRandomCode').text("获取验证码");
	       return;
	   } else { 
	       time--;
	       $('#btnRandomCode').text(time);
	   } 
	   setTimeout(function() { 
	       countDown();
	   },1000);
	}
	
	//注册
	$('#btnRegister').click(function(){
		if($("#password_register").val() != $("#testPassword").val()){
			alert("两次输入密码不一致");
			return;
		}
		var urll = "/register/" + $("#mailCode").val();
		$.ajax({
            type: "POST",
            url: urll,
            contentType: "application/json;charset=UTF-8",
            dataType: "json",
            data: JSON.stringify({username:$("#mail_register").val(),password:$("#password_register").val()}),
            success: function(data){
            	if(data.status == "SUCCESS"){
	            	alert("注册成功");
	            	window.location.href=public_path + "sign-in.html";
	            }else{
	            	console.log(data);
	            	alert(data.message);
	            }
	        }
        });
    });

    //忘记密码跳转
	function forgetPassword(){
		window.location.href = public_path + "forget-password.html";
	}
</script>
</body>
</html>